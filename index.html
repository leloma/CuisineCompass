<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recipe Finder</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f7f7f7;
      }

      .container {
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        margin-bottom: 20px;
      }

      .search-container {
        text-align: center;
        margin-bottom: 20px;
      }

      .search-input {
        width: 60%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
      }

      .search-btn {
        padding: 10px 20px;
        background-color: #4caf50;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
      }

      .search-btn:hover {
        background-color: #45a049;
      }

      .results-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }

      .recipe {
        width: 300px;
        margin: 20px;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .recipe img {
        width: 100%;
        border-radius: 4px;
        margin-bottom: 10px;
      }

      .recipe h2 {
        font-size: 20px;
        margin-bottom: 10px;
      }

      .recipe p {
        font-size: 16px;
        color: #666;
      }
    </style>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="container">
      <h1>Recipe Search</h1>
      <div class="search-container">
        <input
          type="text"
          id="searchInput"
          class="search-input"
          placeholder="Enter a recipe name"
        />
        <button id="searchBtn" class="search-btn">Search</button>
      </div>
      <div class="results-container" id="resultsContainer">
        <!-- Results will be displayed here -->
      </div>
    </div>

    <script>
      $(document).ready(function () {
        $("#searchBtn").click(function () {
          var searchTerm = $("#searchInput").val().trim();
          if (searchTerm !== "") {
            searchRecipes(searchTerm);
          }
        });
        $("#searchInput").keypress(function (event) {
          if (event.which === 13) {
            // 13 is the key code for Enter key
            var searchTerm = $(this).val().trim();
            if (searchTerm !== "") {
              searchRecipes(searchTerm);
            }
          }
        });
      });

      function searchRecipes(searchTerm) {
        var apiUrl =
          "https://www.themealdb.com/api/json/v1/1/search.php?s=" + searchTerm;

        $.ajax({
          url: apiUrl,
          type: "GET",
          dataType: "json",
          success: function (data) {
            console.log(data.meals);
            displayResults(data.meals);
          },
          error: function (xhr, status, error) {
            console.error("Error fetching data:", error);
          },
        });
      }

      function displayResults(meals) {
        var resultsContainer = $("#resultsContainer");
        resultsContainer.empty();
        // var recipeElement = $("<div>").addClass("recipe");
        // var imageElement = $('<img>').attr('src', meals.strMealThumb).appendTo(recipeElement);
        // var titleElement = $("<h2>").text(meals.strMeal).appendTo(recipeElement);
        // var summaryElement = $('<p>').text(meals.strInstructions).appendTo(recipeElement);
        // resultsContainer.append(recipeElement);

        $.each(meals, function (index, meal) {
          var recipeElement = $("<div>")
            .addClass("recipe")
            .append($("<img>").attr("src", meal.strMealThumb))
            .append($("<h2>").text(meal.strMeal))
            .append($("<h5>").text("Origin: " + meal.strArea))
            .append($("<h5>").text("Category: " + meal.strCategory))
            .append($("<h4>").text("Ingredients"))
            .append($("<ul>"));

          for (var i = 1; i <= 20; i++) {
            // Assuming maximum 20 ingredients
            var ingredient = meal["strIngredient" + i];
            var measure = meal["strMeasure" + i];
            if (ingredient && ingredient.trim() !== "") {
              $("<li>")
                .text( ingredient+ " (" + measure +")")
                .appendTo(recipeElement.find("ul"));
            } else {
              // Break loop if there are no more ingredients
              break;
            }
          }

          $("<p>").text(meal.strInstructions).appendTo(recipeElement);

          resultsContainer.append(recipeElement);
        });
      }
    </script>
  </body>
</html>
